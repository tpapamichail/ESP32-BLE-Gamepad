# BLE Gamepad με ESP32

Also available in [English](README.md).

Ένα πλήρες παράδειγμα υλοποίησης ενός ασύρματου gamepad χρησιμοποιώντας το ESP32 και τη βιβλιοθήκη `BleGamepad`. Αυτό το project επιτρέπει τη δημιουργία ενός προσαρμοσμένου gamepad που συνδέεται μέσω Bluetooth σε συσκευές όπως υπολογιστές, smartphones και tablets.

## Περιεχόμενα

- [Περιγραφή](#περιγραφή)
- [Χαρακτηριστικά](#χαρακτηριστικά)
- [Απαιτήσεις](#απαιτήσεις)
- [Σύνδεση Υλικού](#σύνδεση-υλικού)
- [Εγκατάσταση](#εγκατάσταση)
- [Χρήση](#χρήση)
- [Παραμετροποίηση](#παραμετροποίηση)
- [Αδειοδότηση](#αδειοδότηση)
- [Συνεισφορά](#συνεισφορά)
- [Ευχαριστίες](#ευχαριστίες)

## Περιγραφή

Αυτό το project παρουσιάζει πώς να δημιουργήσετε ένα BLE gamepad χρησιμοποιώντας ένα ESP32. Το ESP32 λειτουργεί ως συσκευή Bluetooth Low Energy (BLE) που αναγνωρίζεται ως gamepad από άλλες συσκευές. Μπορείτε να συνδέσετε κουμπιά σε συγκεκριμένα GPIO pins του ESP32 και να τα χρησιμοποιήσετε για να στείλετε εντολές σε συνδεδεμένες συσκευές.

## Χαρακτηριστικά

- **Υποστήριξη 16 κουμπιών**: Συμπεριλαμβανομένων των τυπικών κουμπιών A, B, X, Y, L1, R1, L2, R2, Start, Select, D-Pad και άλλων.
- **Αποθορυβοποίηση κουμπιών**: Εξασφαλίζει αξιόπιστη ανίχνευση πατήματος κουμπιών.
- **Λειτουργία ύπνου**: Εισέρχεται σε βαθύ ύπνο μετά από καθορισμένο χρόνο αδράνειας για εξοικονόμηση ενέργειας.
- **Αφύπνιση από κουμπί**: Μπορεί να αφυπνιστεί από βαθύ ύπνο με το πάτημα ενός συγκεκριμένου κουμπιού.
- **Ενδεικτικό LED**: Δείχνει την κατάσταση σύνδεσης της συσκευής.

## Απαιτήσεις

- **Υλικό**:
  - ESP32 development board
  - Κουμπιά (push buttons) για κάθε εντολή που θέλετε να υποστηρίξετε
  - Καλωδιώσεις για τη σύνδεση των κουμπιών στο ESP32
- **Λογισμικό**:
  - Arduino IDE (έκδοση 1.8.13 ή νεότερη)
  - Εγκατεστημένη υποστήριξη για ESP32 στο Arduino IDE
  - Βιβλιοθήκη `BleGamepad` εγκατεστημένη στο Arduino IDE

## Σύνδεση Υλικού

Συνδέστε τα κουμπιά στα αντίστοιχα GPIO pins του ESP32 όπως περιγράφεται παρακάτω. Κάθε κουμπί πρέπει να συνδεθεί μεταξύ του GPIO pin και της γείωσης (GND).

| Κουμπί                | GPIO Pin |
|-----------------------|----------|
| BUTTON_A_PIN          | 32       |
| BUTTON_B_PIN          | 33       |
| BUTTON_X_PIN          | 25       |
| BUTTON_Y_PIN          | 26       |
| BUTTON_L1_PIN         | 27       |
| BUTTON_R1_PIN         | 14       |
| BUTTON_L2_PIN         | 12       |
| BUTTON_R2_PIN         | 13       |
| BUTTON_START_PIN      | 23       |
| BUTTON_SELECT_PIN     | 22       |
| BUTTON_THUMB_LEFT_PIN | 4        |
| BUTTON_THUMB_RIGHT_PIN| 5        |
| BUTTON_DPAD_UP_PIN    | 21       |
| BUTTON_DPAD_DOWN_PIN  | 19       |
| BUTTON_DPAD_LEFT_PIN  | 18       |
| BUTTON_DPAD_RIGHT_PIN | 17       |

**Σημείωση**: Το ενσωματωμένο LED του ESP32 συνήθως βρίσκεται στο GPIO 2.

## Εγκατάσταση

1. **Εγκατάσταση του Arduino IDE**:

   Κατεβάστε και εγκαταστήστε το Arduino IDE από την [επίσημη ιστοσελίδα](https://www.arduino.cc/en/software).

2. **Εγκατάσταση υποστήριξης ESP32 στο Arduino IDE**:

   - Ανοίξτε το Arduino IDE.
   - Μεταβείτε στα `File` > `Preferences`.
   - Στο πεδίο `Additional Boards Manager URLs`, προσθέστε:

     ```
     https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
     ```

   - Πατήστε `OK`.
   - Μεταβείτε στα `Tools` > `Board` > `Boards Manager`.
   - Αναζητήστε `esp32` και εγκαταστήστε το πακέτο `esp32` της Espressif Systems.

3. **Εγκατάσταση της βιβλιοθήκης BleGamepad**:

   - Μεταβείτε στα `Sketch` > `Include Library` > `Manage Libraries`.
   - Αναζητήστε `BleGamepad`.
   - Εγκαταστήστε τη βιβλιοθήκη `ESP32-BLE-Gamepad` του `lemmingDev`.

4. **Κατέβασμα του κώδικα**:

   - Κατεβάστε ή κλωνοποιήστε αυτό το repository.
   - Ανοίξτε το αρχείο `.ino` στο Arduino IDE.

## Χρήση

1. **Προγραμματισμός του ESP32**:

   - Συνδέστε το ESP32 στον υπολογιστή σας μέσω USB.
   - Επιλέξτε το κατάλληλο board από το `Tools` > `Board` (π.χ., `ESP32 Dev Module`).
   - Επιλέξτε τη σωστή θύρα από το `Tools` > `Port`.
   - Πατήστε το κουμπί `Upload` για να φορτώσετε το πρόγραμμα στο ESP32.

2. **Σύζευξη με συσκευή**:

   - Μετά τον προγραμματισμό, το ESP32 θα ξεκινήσει να λειτουργεί ως BLE gamepad.
   - Στη συσκευή με την οποία θέλετε να συνδεθείτε (υπολογιστής, smartphone κ.λπ.), μεταβείτε στις ρυθμίσεις Bluetooth.
   - Αναζητήστε νέες συσκευές.
   - Θα πρέπει να δείτε μια συσκευή με το όνομα `ESP32 Gamepad` ή παρόμοιο.
   - Επιλέξτε τη συσκευή για σύζευξη.

3. **Χρήση του gamepad**:

   - Αφού ολοκληρωθεί η σύζευξη, το ESP32 θα αναγνωρίζεται ως gamepad.
   - Πατήστε τα κουμπιά που έχετε συνδέσει για να στείλετε εντολές στη συσκευή σας.
   - Το ενσωματωμένο LED θα είναι αναμμένο όταν υπάρχει ενεργή σύνδεση.

4. **Λειτουργία ύπνου**:

   - Αν δεν υπάρξει δραστηριότητα για 5 λεπτά (προκαθορισμένη τιμή), το ESP32 θα εισέλθει σε βαθύ ύπνο για εξοικονόμηση ενέργειας.
   - Πατήστε το κουμπί `A` (ή το κουμπί που ορίζεται ως `WAKE_BUTTON_PIN`) για να αφυπνίσετε τη συσκευή.

## Παραμετροποίηση

- **Αλλαγή των GPIO pins**:

  Αν θέλετε να χρησιμοποιήσετε διαφορετικά GPIO pins, μπορείτε να τροποποιήσετε τις αντίστοιχες γραμμές στον κώδικα:

  ```cpp
  constexpr int BUTTON_A_PIN = <νέο_pin>;
  ```

- **Ρύθμιση του χρονικού ορίου ύπνου**:

  Μπορείτε να αλλάξετε το χρονικό διάστημα αδράνειας πριν η συσκευή εισέλθει σε ύπνο τροποποιώντας τη σταθερά `SLEEP_TIMEOUT` (σε milliseconds):

  ```cpp
  constexpr unsigned long SLEEP_TIMEOUT = 300000; // π.χ., για 5 λεπτά
  ```

- **Ρύθμιση του διαστήματος polling**:

  Αν θέλετε να αλλάξετε τη συχνότητα με την οποία ελέγχονται τα κουμπιά, τροποποιήστε τη σταθερά `POLLING_INTERVAL`:

  ```cpp
  constexpr unsigned long POLLING_INTERVAL = 10; // σε milliseconds
  ```

- **Προσθήκη επιπλέον λειτουργικότητας**:

  Μπορείτε να επεκτείνετε τον κώδικα για να υποστηρίξετε αναλογικούς άξονες, δόνηση ή άλλα χαρακτηριστικά που υποστηρίζει η βιβλιοθήκη `BleGamepad`.

## Αδειοδότηση

Αυτό το project διατίθεται υπό την άδεια MIT. Δείτε το αρχείο [LICENSE](LICENSE) για περισσότερες πληροφορίες.

## Συνεισφορά

Συνεισφορές είναι ευπρόσδεκτες! Μπορείτε να ανοίξετε ένα issue για να αναφέρετε προβλήματα ή να προτείνετε βελτιώσεις. Επίσης, μπορείτε να υποβάλετε pull requests με βελτιώσεις ή νέες λειτουργίες.

## Ευχαριστίες

- **[lemmingDev](https://github.com/lemmingDev)** για τη βιβλιοθήκη [ESP32-BLE-Gamepad](https://github.com/lemmingDev/ESP32-BLE-Gamepad).
- **Κοινότητα ESP32** για την υποστήριξη και τα εργαλεία που παρέχουν.

---

**Σημείωση**: Αυτό το project δημιουργήθηκε για να βοηθήσει άλλους developers να υλοποιήσουν ένα BLE gamepad με το ESP32. Αν έχετε ερωτήσεις ή χρειάζεστε βοήθεια, μη διστάσετε να επικοινωνήσετε. 
